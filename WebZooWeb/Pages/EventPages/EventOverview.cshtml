@page
@model WebZooWeb.Pages.EventPages.EventOverviewModel
@{
    ViewData["Title"] = "Event Overview";
}

<div class="row row-cols-3">
    @foreach (var e in Model.Events)
    {
        <div class="card-body">
            <h4 class="card-title">@e.Name</h4>
            <p class="card-text">Dato: @e.Date<br />Starttidspunkt: @e.StartHour<br />Sluttidspunkt: @e.EndHour<br />
                Pladsbegrænsing: @e.MaxAttendents<br />Tilmeldte: @e.CurrentAttendents<br />
                Beskrivelse: @e.Description
            </p>
        </div>
    }
</div>


<h2>@Model.Month/@Model.Year</h2>

<table class="table table-bordered text-center">
    <thead>
        <tr>
            <th>Sun</th>
            <th>Mon</th>
            <th>Tue</th>
            <th>Wed</th>
            <th>Thu</th>
            <th>Fri</th>
            <th>Sat</th>
        </tr>
    </thead>
    <tbody>
        @{
            var daysInMonth = DateTime.DaysInMonth(Model.Year, Model.Month);
            var firstDayOfMonth = new DateTime(Model.Year, Model.Month, 1);
            var dayOfWeek = (int)firstDayOfMonth.DayOfWeek;
            int currentDay = 1;

            for (int week = 0; currentDay <= daysInMonth; week++)
            {
                <tr>
                    @for (int day = 0; day < 7; day++)
                    {
                        if (week == 0 && day < dayOfWeek || currentDay > daysInMonth)
                        {
                            <td></td>
                        }
                        else
                        {
                            var eventToday = Model.Events.FirstOrDefault(e => e.Date.Day == currentDay);
                            var cssClass = eventToday != null ? "bg-danger text-white fw-bold" : "";
                            <td class="@cssClass">@currentDay</td>
                            currentDay++;
                        }
                    }
                </tr>
            }
        }
    </tbody>
</table>
